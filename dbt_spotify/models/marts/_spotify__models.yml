version: 2

models:
  - name: dim_album
    description: Directory of all albums observed in the data. Each row is an album.
    columns:
      - name: album_id
        description: Unique ID for this album.
        tests:
          - unique
          - not_null

      - name: album
        description: Album title.

      - name: release_date
        description: Date when the album was released.

  - name: dim_artist
    description: Directory of artists observed in the data. Each row is an artist or performing group.
    columns:
      - name: artist_id
        description: Unique artist ID.
        tests:
          - unique
          - not_null

      - name: artists
        description: '{{ doc("track_artists") }}'

  - name: dim_track
    description: Directory of all tracks observed. Each row is a track.
    columns:
      - name: track_id
        description: Unique track ID.
        tests:
          - unique
          - not_null

      - name: track_name
        description: The track's name.

      - name: album_id
        description: Album ID corresponding to this track.

      - name: artists
        description: '{{ doc("track_artists") }}'

      - name: duration_ms
        description: Track duration (milliseconds).

  - name: fct_played_track
    description: Spotify listening history. Each row is an instance that a track was played.
    columns:
      - name: play_id
        description: Unique ID for this instance of listening history.
        tests:
          - unique
          - not_null

      - name: track_id
        description: '{{ doc("track_id") }}'

      - name: album_id
        description: '{{ doc("album_id") }}'

      - name: played_at
        description: '{{ doc("played_at") }}'

      - name: track_popularity
        description: '{{ doc("popularity") }}'

      - name: context
        description: What context the track is being played in.
